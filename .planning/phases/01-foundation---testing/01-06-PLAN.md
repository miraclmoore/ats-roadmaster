---
phase: 01-foundation---testing
plan: 06
type: execute
wave: 2
depends_on: [01-05]
files_modified:
  - web/package.json
autonomous: false
gap_closure: true

must_haves:
  truths:
    - "CI workflow executes successfully in GitHub Actions"
    - "Tests run automatically on commit to main/develop"
    - "Coverage reports uploaded as artifacts"
    - "Workflow blocks merge on test failure"
  artifacts:
    - path: ".github/workflows/test.yml"
      provides: "GitHub Actions workflow (already exists from 01-04)"
      min_lines: 50
  key_links:
    - from: ".github/workflows/test.yml"
      to: "npm run test:coverage"
      via: "coverage step execution"
      pattern: "npm run test:coverage"
---

<objective>
Trigger CI pipeline execution to verify workflow runs successfully with adjusted coverage thresholds.

Purpose: Close verification gap by confirming CI workflow executes end-to-end in GitHub Actions
Output: Successful CI workflow run with passing tests and uploaded coverage artifacts
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation---testing/01-VERIFICATION.md

# CI workflow file
@.github/workflows/test.yml

# Previous plan that adjusted thresholds
@.planning/phases/01-foundation---testing/01-05-PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Commit coverage threshold changes to trigger CI</name>
  <files>
    web/package.json
  </files>
  <action>
    Create a minimal documentation-only change to trigger CI workflow execution.

    Add a comment to web/package.json documenting the coverage strategy:
    ```json
    {
      "name": "roadmaster-web",
      "version": "0.1.0",
      "private": true,
      "description": "RoadMaster Pro - ATS companion dashboard with real-time telemetry",
      "//": "Coverage strategy: 100% for new calculation logic, brownfield UI excluded until refactoring phases",
      "scripts": {
        ...existing scripts...
      },
      ...rest of file...
    }
    ```

    This is a non-breaking change that provides context for the package while triggering the CI workflow.

    Commit the coverage threshold changes from plan 01-05 along with this documentation:
    ```bash
    git add web/vitest.config.mts web/package.json
    git commit -m "fix(test): adjust coverage thresholds for brownfield codebase

Thresholds now reflect tested code reality:
- New calculation functions: 100% coverage
- Brownfield UI excluded until refactoring phases
- Incremental improvement strategy documented

Closes verification gap: coverage thresholds configured correctly

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>"
    ```

    Push to main branch to trigger CI workflow:
    ```bash
    git push origin main
    ```

    IMPORTANT: This will trigger the GitHub Actions workflow
    IMPORTANT: Workflow will run all tests with adjusted thresholds
    CRITICAL: DO NOT proceed without verifying local tests pass first
  </action>
  <verify>
    Run `cd web && npm run test:coverage` locally BEFORE pushing and confirm all tests pass
    Verify git status shows web/vitest.config.mts and web/package.json as staged
    After push, verify commit appears in GitHub
  </verify>
  <done>
    Coverage threshold changes committed and pushed to main, triggering CI workflow execution
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>CI workflow triggered by push to main branch</what-built>
  <how-to-verify>
1. Navigate to GitHub Actions tab: https://github.com/[your-username]/ats-roadmaster/actions
2. Verify "Test" workflow appears in the list with recent run
3. Click on the workflow run to see execution details
4. Verify all steps complete successfully:
   - ✓ Install dependencies
   - ✓ Run unit tests with coverage
   - ✓ Upload coverage reports
   - ✓ Install Playwright browsers
   - ✓ Run E2E tests
   - ✓ Upload Playwright report (only on failure)
5. Check that coverage reports are uploaded as artifacts (click on workflow run > "Artifacts" section)
6. Verify workflow status is green (passing)
7. Download coverage artifact and verify it contains HTML coverage report

Expected results:
- All 96 tests pass (22 profit, 24 efficiency, 19 API, 31 component/E2E)
- Coverage thresholds met (60% for tested code)
- Coverage artifact uploaded successfully
- E2E tests run across 3 browsers (9 total tests)
- Workflow completes in under 5 minutes
- Status badge shows "passing"
  </how-to-verify>
  <resume-signal>Type "approved" if CI workflow runs successfully, or describe any failures to address</resume-signal>
</task>

</tasks>

<verification>
Human verification required:
- GitHub Actions workflow executes successfully
- All test steps complete without errors
- Coverage reports uploaded as artifacts
- Workflow shows green (passing) status
- Future commits will trigger workflow automatically
</verification>

<success_criteria>
- CI workflow executed at least once successfully in GitHub Actions
- All tests pass in CI environment (matching local results)
- Coverage reports uploaded as artifacts and accessible for download
- Workflow configured to run automatically on future commits to main/develop
- Workflow would block merge on test failure (verified by green passing status)
- Verification gap closed: "CI pipeline runs tests automatically on every commit and blocks merge on failure"
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation---testing/01-06-SUMMARY.md`
</output>
